# koishi-plugin-tldr

> 太长不看 - AI总结群聊消息的功能

## 介绍

这是一个用于Koishi机器人框架的插件，它可以帮助用户总结群聊消息。当群聊消息过多时，用户可以使用此插件快速获取重要内容的摘要，避免阅读冗长的聊天记录。

## 功能特点

- 自动记录群聊消息，支持配置最大记录数量
- 简单的用户交互流程，通过引用消息确定总结范围
- 使用OpenAI API进行智能总结
- 完全可自定义的API端点和模型选择，支持各种不同平台

## 安装方法

```bash
# 在你的Koishi项目中安装
npm install koishi-plugin-tldr2
```
有一个2是因为我之前猪鼻了

或者在Koishi插件市场中搜索"tldr"并安装。

## 使用方法

1. 在Koishi控制台中配置插件，设置OpenAI API密钥和其他选项
2. 在群聊中发送`.tldr`命令启动总结流程
3. 按照机器人提示，回复（引用）第一条消息，并输入"1"
4. 再次按照机器人提示，回复（引用）第二条消息，并输入"2"
5. 机器人将自动总结两条消息之间的所有聊天内容

## 配置项

| 配置项 | 类型 | 默认值 | 说明 |
|-------|------|-------|------|
| maxMessages | number | 100 | 记录的最大消息数量，设置为0表示无限 |
| openaiEndpoint | string | https://api.openai.com/v1/chat/completions | OpenAI API端点 |
| openaiApiKey | string | (必填) | OpenAI API密钥 |
| openaiModel | string | gpt-3.5-turbo | 使用的OpenAI模型 |

## 示例

用户: `.tldr`
机器人: `请回复（引用）第一条消息，并且输入1`
用户: (引用某条消息) `1`
机器人: `请回复（引用）第二条消息，并且输入2`
用户: (引用另一条消息) `2`
机器人: `正在总结消息，请稍候...`
机器人: `【太长不看】总结：(AI生成的总结内容)`

## 注意事项

- 插件会自动过滤掉消息中的图片，用`[图片]`标记替代
- 总结质量取决于所使用的AI模型
- 请确保您有足够的API调用额度

## 许可

AGPL-3.0
